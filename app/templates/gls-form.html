<form class="uk-form" @submit.prevent="submitForm">

    <ul class="uk-tab">
        <li :class="{'uk-active': currentTab == 'pakket'}"><a href="#" @click.prevent="currentTab = 'pakket'">
            <i class="uk-icon-cubes uk-margin-small-right"></i>Pakket</a></li>
        <li :class="{'uk-active': currentTab == 'versturen'}"><a href="#" @click.prevent="currentTab = 'versturen'">
            <i class="uk-icon-paper-plane-o uk-margin-small-right"></i>Versturen</a></li>
        <li :class="{'uk-active': currentTab == 'instellingen'}"><a href="#" @click.prevent="currentTab = 'instellingen'">
            <i class="uk-icon-cogs uk-margin-small-right"></i>Instellingen</a></li>
    </ul>

    <div id="shipment-tabs" class="uk-margin">
        <div v-show="currentTab == 'pakket'">

            <div class="uk-grid uk-grid-width-medium-1-3 uk-grid-small uk-form-stacked uk-flex-center">
                <div class="uk-text-center">
                    <label class="uk-form-label" for="form-parcel_weight">Gewicht pakket *</label>
                    <div class="uk-form-controls">
                        <input v-model="shipment.parcel_weight" id="form-parcel_weight" type="number"
                               class="uk-form-width-medium uk-text-right" min="1" step="1" required="" number>
                    </div>
                </div>
                <div class="uk-text-center">
                    <label class="uk-form-label" for="form-parcel_sequence">Pakket reeks</label>
                    <div class="uk-form-controls">
                        <input v-model="shipment.parcel_sequence" id="form-parcel_sequence" type="number"
                               class="uk-form-width-medium uk-text-right" min="0" required="" number>
                    </div>
                </div>
                <div class="uk-text-center">
                    <label class="uk-form-label" for="form-parcel_quantity">Pakket aantal</label>
                    <div class="uk-form-controls">
                        <input v-model="shipment.parcel_quantity" id="form-parcel_quantity" type="number"
                               class="uk-form-width-medium uk-text-right" min="0" required="" number>
                    </div>
                </div>
            </div>
            <hr/>
            <div class="uk-grid uk-form-horizontal">
                <div class="uk-width-medium-1-2">
                    <fields :config="$options.fields1" :model.sync="shipment" template="formrow"></fields>
                </div>
                <div class="uk-width-medium-1-2">
                    <fields :config="$options.fields2" :model.sync="shipment" template="formrow"></fields>

                    <div v-show="shipment.gls_parcel_number == 0" class="uk-margin-large uk-text-center">
                        <button class="uk-button uk-button-success uk-button-large"
                                @click="task = 'sendAndSave'">
                            <i v-spinner="sending" icon="paper-plane-o"></i>
                            Opslaan en aanmelden
                        </button>
                    </div>

                </div>
            </div>

        </div>
        <div v-show="currentTab == 'versturen'">

            <div class="uk-grid uk-grid-small uk-form-stacked">
                <div class="uk-width-medium-1-2">
                    <dl class="uk-description-list-horizontal">
                        <fields :config="$options.fields3" :model.sync="shipment" template="descriptionlist"></fields>
                    </dl>
                </div>
                <div class="uk-width-medium-1-2 uk-flex uk-flex-column uk-flex-wrap-space-between">

                    <div>
                        <div v-show="shipment.gls_parcel_number == 0" class="uk-text-center">
                            <button class="uk-button uk-button-success uk-button-large"
                                    @click="task = 'sendAndSave'">
                                <i v-spinner="sending" icon="paper-plane-o"></i>
                                Opslaan en aanmelden
                            </button>
                        </div>
                        <div v-else>
                            <dl>
                                <dt>Track & Trace</dt>
                                <dd>
                                    <a v-show="shipment.data.track_trace" :href="shipment.data.track_trace"
                                       target="_blank" class="uk-display-block uk-text-truncate">
                                        <i class="uk-icon-external-link uk-margin-small-right"></i>
                                        {{ shipment.data.track_trace }}</a>
                                </dd>
                                <dt v-show="shipment.pdf_url">Etiket</dt>
                                <dd v-show="shipment.pdf_url">
                                    <a :href="shipment.pdf_url" class="uk-display-block uk-text-truncate">
                                        <i class="uk-icon-file-pdf-o uk-margin-small-right"></i>
                                        {{ shipment.pdf_url }}</a>
                                </dd>
                            </dl>
                        </div>

                        <div v-if="progresserror" class="uk-alert uk-alert-danger">{{ progresserror }}</div>

                        <div v-if="progressmessage" class="uk-alert"
                             :class="{'uk-alert-success': progress == 100}">{{ progressmessage }}</div>

                        <div v-if="sending" class="uk-progress uk-progress-striped uk-active">
                            <div class="uk-progress-bar" :style="{'width': progress +'%'}"></div>
                        </div>

                    </div>

                </div>
            </div>

        </div>
        <div v-show="currentTab == 'instellingen'">

            <div class="uk-grid uk-grid-width-medium-1-2 uk-grid-small uk-form-horizontal">
                <div>

                    <div class="uk-form-row">
                        <label class="uk-form-label" for="form-sender_id">Afzender</label>
                        <div class="uk-form-controls">
                            <select v-model="shipment.sender_id" id="form-sender_id" class="uk-form-width-medium">
                                <option v-for="sender in senders" :value="sender.id">{{ sender.sender_name_1 }}</option>
                            </select>
                        </div>
                    </div>

                    <fields :config="$options.fields4" :model.sync="shipment" template="formrow"></fields>
                </div>
                <div>
                    <fields :config="$options.fields5" :model.sync="shipment" template="formrow"></fields>
                </div>
            </div>

        </div>
    </div>
    <div class="uk-modal-footer uk-text-right">
        <button type="button" class="uk-button uk-margin-small-right uk-modal-close">Sluiten</button>
        <button type="submit" class="uk-button uk-button-primary" @click="task = 'saveShipment'">
            <i v-spinner="saving[shipment.id]" icon="save"></i>Opslaan</button>
    </div>


</form>
